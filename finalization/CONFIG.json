{
  "system": {
    "name": "LatentWire",
    "version": "1.0.0",
    "description": "Continuous Interlingua for Cross-Model Language Generation",
    "environment": {
      "pytorch_enable_mps_fallback": 1,
      "pythonpath": "."
    }
  },

  "models": {
    "source": {
      "id": "meta-llama/Meta-Llama-3.1-8B-Instruct",
      "type": "llama",
      "device_map": "auto"
    },
    "target": {
      "id": "Qwen/Qwen2.5-7B-Instruct",
      "type": "qwen",
      "device_map": "auto"
    },
    "encoder": {
      "type": "byte",
      "backbone": null,
      "hf_encoder_id": "sentence-transformers/all-MiniLM-L6-v2",
      "max_enc_tokens": 1024,
      "freeze": false
    }
  },

  "datasets": {
    "training": {
      "name": "squad",
      "samples": 87599,
      "config": null
    },
    "evaluation": {
      "datasets": ["squad", "sst2", "agnews", "trec"],
      "samples": 200,
      "seeds": [42, 123, 456]
    }
  },

  "training": {
    "latent": {
      "latent_len": 32,
      "d_z": 256,
      "latent_shared_len": null,
      "latent_private_len": 0
    },
    "optimization": {
      "epochs": 24,
      "batch_size": 64,
      "grad_accum_steps": 1,
      "lr": 0.0001,
      "max_grad_norm": 1.0,
      "scale_l2": 0.05,
      "adapter_rms_l2": 0.0
    },
    "objectives": {
      "k_token_ce": 4,
      "first_token_ce_weight": 0.5,
      "first_token_ce_schedule": "none",
      "first_token_entropy_weight": 0.0,
      "kd_tau": 1.0,
      "kd_alpha": 0.5
    },
    "anchoring": {
      "warm_anchor_text": "Answer: ",
      "append_bos_after_prefix": "yes",
      "use_chat_template": false
    },
    "dataloader": {
      "num_workers": 4,
      "prefetch_factor": 2,
      "pin_memory": false,
      "cache_tokenization": false
    }
  },

  "evaluation": {
    "generation": {
      "max_new_tokens": 12,
      "max_answer_tokens": 32,
      "first_token_top_p": 0.95,
      "first_token_temperature": 0.7,
      "eos_ban_steps": 4
    },
    "calibration": {
      "method": "embed_rms",
      "per_example": true
    },
    "anchoring": {
      "latent_anchor_mode": "text",
      "latent_anchor_text": "Answer: ",
      "append_bos_after_prefix": "yes"
    },
    "baselines": {
      "text_baseline": true,
      "token_budget": true,
      "joint_rescoring": true
    },
    "modes": {
      "sequential_eval": true,
      "fresh_eval": true,
      "skip_prefix_acc": false
    }
  },

  "compression": {
    "quantization": {
      "methods": ["fp16", "int8", "int6", "int4"],
      "group_size": 32
    },
    "target_ratio": 4.0
  },

  "hpc": {
    "slurm": {
      "account": "marlowe-m000066",
      "partition": "preempt",
      "time": "12:00:00",
      "memory": "256GB",
      "gpus": 4,
      "work_dir": "/projects/m000066/sujinesh/LatentWire"
    }
  },

  "paths": {
    "output_dir": "runs",
    "checkpoint_dir": "runs/checkpoints",
    "logs_dir": "runs/logs",
    "figures_dir": "figures",
    "results_dir": "runs/results"
  },

  "diagnostics": {
    "diagnostic_log": "",
    "grad_diag_interval": 0,
    "grad_diag_components": "encoder,adapter",
    "save_interval": 1000,
    "log_interval": 100
  },

  "experiments": {
    "phases": {
      "phase1": {
        "description": "Basic training and evaluation",
        "datasets": ["squad"],
        "samples": 1000
      },
      "phase2": {
        "description": "Multi-dataset evaluation",
        "datasets": ["squad", "sst2", "agnews", "trec"],
        "samples": 200
      },
      "phase3": {
        "description": "Efficiency benchmarks",
        "components": ["latency", "throughput", "compression"]
      },
      "phase4": {
        "description": "Ablation studies",
        "dimensions": ["latent_len", "d_z", "k_token_ce"]
      }
    }
  },

  "defaults": {
    "seed": 42,
    "data_seed": 42,
    "device": "auto",
    "mixed_precision": "fp16",
    "require_cuda": "yes",
    "sequential_models": true,
    "distributed": false
  }
}